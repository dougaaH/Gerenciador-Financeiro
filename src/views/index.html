<!DOCTYPE html>
<html>
  <head>
    <title>Gerenciador Financeiro</title>
    <link rel="stylesheet" href="../assets/dashboard.css" />
  </head>
  <body>
    <!-- Barra Lateral de Navegação (Sidebar) -->
    <div class="sidebar">
      <div class="sidebar-logo">FinanceirApp</div>
      <nav class="sidebar-nav">
        <div id="nav-dashboard" class="nav-item active">
          <!-- Ícone do mockup -->
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <rect x="3" y="3" width="7" height="7" />
            <rect x="14" y="3" width="7" height="7" />
            <rect x="14" y="14" width="7" height="7" />
            <rect x="3" y="14" width="7" height="7" />
          </svg>
          Dashboard
        </div>
        <div id="nav-transactions" class="nav-item">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="12" y1="1" x2="12" y2="23" />
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
          </svg>
          Transações
        </div>
        <div id="nav-reports" class="nav-item">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M3 3v18h18" />
            <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3" />
          </svg>
          Relatórios
        </div>
      </nav>
    </div>

    <!-- Conteúdo Principal -->
    <div class="main-content">
      <!-- Tela 1: Dashboard (Visível por padrão) -->
      <div id="dashboard-view" class="view">
        <div class="dashboard-header">
          <h1 class="dashboard-title">Dashboard Financeiro</h1>
          <button id="add-transaction-btn" class="btn btn-primary">
            Nova Transação
          </button>
        </div>

        <div class="balance-card">
          <div class="balance-label">Saldo Atual</div>
          <div class="balance-amount" id="balance-amount">R$ 0,00</div>
        </div>

        <div class="dashboard-grid">
          <div class="grid-card chart-card">
            <h3>Gastos por Categoria</h3>
            <div class="chart-container">
              <canvas id="categoryChart"></canvas>
            </div>
          </div>
          <div class="grid-card chart-card">
            <h3>Receitas vs. Despesas</h3>
            <div class="chart-container">
              <canvas id="summaryChart"></canvas>
            </div>
          </div>
          <div class="grid-card chart-card balance-evolution-card">
            <h3>Evolução do Saldo</h3>
            <div class="chart-container">
              <canvas id="balanceEvolutionChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Tela 2: Todas as Transações (Escondida por padrão) -->
      <div id="transactions-view" class="view view-hidden">
        <div class="dashboard-header">
          <h1 class="dashboard-title">Todas as Transações</h1>
        </div>
        <div class="table-controls">
          <input
            type="text"
            id="search-input"
            placeholder="Buscar por descrição..."
          />
        </div>

        <div class="table-container-full">
          <table id="all-transactions-table" class="data-table">
            <thead>
              <tr>
                <th>Data</th>
                <th>Descrição</th>
                <th>Valor</th>
                <th>Tipo</th>
                <th>Categoria</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody>
              <!-- Conteúdo será preenchido via JS -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Tela 3: Relatórios (Escondida por padrão) -->
      <div id="reports-view" class="view view-hidden">
        <div class="dashboard-header">
          <h1 class="dashboard-title">Relatórios Mensais</h1>
        </div>

        <div class="report-controls">
          <div class="date-filter">
            <label for="start-date">De:</label>
            <input type="date" id="start-date" />
            <label for="end-date">Até:</label>
            <input type="date" id="end-date" />
          </div>
          <button id="export-data-btn" class="btn btn-outline">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
              <polyline points="7 10 12 15 17 10" />
              <line x1="12" y1="15" x2="12" y2="3" />
            </svg>
            Exportar Dados
          </button>
        </div>

        <div class="grid-card" style="margin-top: 20px">
          <h3>Resumo Mensal</h3>
          <table id="reports-table" class="data-table">
            <thead>
              <tr>
                <th>Mês</th>
                <th>Total Receitas</th>
                <th>Total Despesas</th>
                <th>Saldo do Mês</th>
              </tr>
            </thead>
            <tbody id="reports-table-body">
              <!-- Conteúdo será preenchido via JS -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Modal para Adicionar/Editar Transação -->
    <div id="transaction-modal" class="modal">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <h2 id="modal-title">Nova Transação</h2>
        <form id="transaction-form">
          <input type="hidden" id="transaction-id" />

          <label for="description">Descrição</label>
          <input
            type="text"
            id="description"
            placeholder="Ex: Compra no supermercado"
            required
          />

          <label for="amount">Valor</label>
          <input
            type="number"
            id="amount"
            step="0.01"
            placeholder="0.00"
            required
          />

          <label for="type">Tipo</label>
          <select id="type" required>
            <option value="receita">Receita</option>
            <option value="despesa">Despesa</option>
          </select>

          <label for="category">Categoria:</label>
          <select id="category" required>
            <option value="alimentacao">Alimentação</option>
            <option value="moradia">Moradia</option>
            <option value="transporte">Transporte</option>
            <option value="lazer">Lazer</option>
            <option value="saude">Saúde</option>
            <option value="salario">Salário</option>
            <option value="outros">Outros</option>
          </select>

          <label for="date">Data</label>
          <input type="date" id="date" required />

          <!-- Botão de submit com as novas classes -->
          <button
            type="submit"
            class="btn btn-primary"
            style="width: 100%; margin-top: 20px"
          >
            Salvar
          </button>
        </form>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../renderer/index.js" type="module"></script>
  </body>
</html>
